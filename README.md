Библиотека для работы с пользователями

Список функций:

 initialize($array) - функция, инициализирует параметры для работы с библиотекой

  error() - функция, возвращает ошибки

  validate($rules) - функция проверяет правильность ввода через форму. Проверяте тогда, когда есть  параметр valid_me
       При успехе- возвращает параметры из формы и записывает в переменную $data/при ошибку-FALSE. Если не указан $rules - берет $validation_name или $table 

  add($param=array()) - функция нужна, для добавления пользователя. Принимает массив, который нужно добавить в БД.
    Если $param - не указан, то, берет массив $data (результат функции validate($rules))
 
  _is_table()-функция проверяет указанна ли таблица в БД

  _get_form($param=array(),$rules=null) - функция нужна, что бы получить данные из формы. Параметр $param- массив параметров которые сливаются с массивом из формы
       (для записи в БД параметров не из формы), Если не указан $rules - берет $validation_name или $table
  edit(id_user=null,$param=array()) - функция нужна, для редактирования  данных для пользователя.

  delete(id_user=null) - функция нужна, что бы пользователь мог удалить свою анкету
 
  view($id_user) - функция нужна, что бы вывеси пользователю данные пользователя

  get_list() - функция выводит список пользователей

  activate($id)- функция нужна для активации учетной записи по email или phone

  _activate_to_email($id, $email) функция нужна для активации учетной записи по email(private)

  _activate_to_phone($id, $phone) функция, нужна для активации учетной записи через телефон номер (private) в разработке

   check_activate() - проверка активации. Принимает параметр  $_GET['activate_param'] с кодом активации
 
  send_mail()-функция, нужна для отправки письма. перед ее вызовом должны быть установленны параметр для отправки:

  array('mail_name_from'=>, 'mail_subject'=>,'mail_body'=>, 'mail_email_from' => , 'mail_email_to'=>)

  send_sms()-функция, нужна для отправки SMS.

  get_lost_pass($param) - функция нужна, что бы восстановить пароль (1. Сгенерировать новый. 2.отправить пользователю на email/sms новый пароль)
 
   login($redirect = null) - функция нужна, что выводить форму и проверять данные для авторизации $redirect - точка для редиректа
  Поля (логин, пароль) функция узнает из массива правил в config/forma_validation.php)
  1 - логин
  2-пароль
 logout() - функция, нужна, что бы разлогинивать
 
  _set_session($param=array()) - функция, нужна, что бы установить сессию. получает ассоциативный массив,
    и устанавливает на основе его сессии $_SESSION[$session_pref.$key] = $value
 
  _send_mime_mail() - функция нужна, что бы отправлять  email(private). Данные для отправки получает из свойств класса($mail_name_from,  $mail_subject,
    $mail_body,  $mail_email_from = 'admin@admin.ru', $mail_email_to)

  _mime_header_encode($str, $data_charset, $send_charset) - вспомогательная функция для  формирования и отправки писем

  _send_sms($param) - функция нужна, что бы отправить SMS
 
  РАБОТА С СОЦИАЛЬНЫМИ КНОПКАМИ:
  view_social()-функция, нужна, что бы вернуть HTML код  кнопой соц. сетей
  handler_social() - функция нужна, что бы обработать ответ  полученный от соц. сети.  Возвращает массив данных.
  В массиве есть параметр $array['is_user'] (TRUE/LASE), который сообщает есть ли такой пользователь в сети
  login_social($redirect = null,$param=null) - функция нужна , чтобы залогировать пользователя через соц. сеть.
  ПС для работы с соц. кнопками в режиме $soc_type_result = 'boolean', без перезагрузки нужно:
  1)написать JS функцию  на подобие handler_social($token), только со своим обработчиком.
   Функция посылает $_POST['token']  и получает данные пользователя в формате JSON
  2)указать функцию в параметре $soc_js_func; Пример $soc_js_func='handler_social'
  3) прописать  относительный путь к view: ulogin_xd.html в переменную $soc_ulogin_xd и положить файл в нужное место .
  Пример: http://www.site.ru/data/ulogin/ulogin_xd.html
 /